# Chapter 9

## Commands

- `id` - Display user identity.
- `chmod` - Change a file’s mode.
- `umask` - Set the default file permissions.
- `su` - Run a shell as another user.
- `sudo` - Execute a command as another user.
- `chown` - Change a file’s owner.
- `chgrp` - Change a file’s group ownership.
- `passwd` - Change a user’s password

## Owners, Group Members, and Everybody Else

In the Unix security model, a user may own files and directories. When a user owns a file or directory, the user has control over its access. Users can, in turn, belong to a group consisting of one or more users who are given access to files and directories by their owners. In addition to granting access to a group, an owner may also grant some set of access rights to everybody, which in Unix terms is referred to as the world.

```bash
himanshu in ~: id
uid=1000(himanshu) gid=1000(himanshu) groups=1000(himanshu),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),120(lpadmin),131(lxd),132(sambashare)
```

When user accounts are created, users are assigned a number called a user ID, or uid. This is then, for the sake of the humans, mapped to a username. The user is assigned a primary group ID, or gid, and may belong to additional groups.

User accounts are defined in the `/etc/passwd` file, and groups are defined in the `/etc/group` file. When user accounts and groups are created, these files are modified along with `/etc/shadow`, which holds information about the user’s password. For each user account, the `/etc/passwd` file defines the user (login) name, the uid, the gid, the account’s real name, the home directory, and the login shell. If you examine the contents of `/etc/passwd` and `/etc/group`, you will notice that besides the regular user accounts there are accounts for the superuser
(uid 0) and various other system users.

## Reading, Writing, and Executing

Access rights to files and directories are defined in terms of read access,
write access, and execution access. 

```bash
himanshu in practice: ls
dir1  dir2  fun-hard  ls.txt  New_File.txt  UserInput.txt
himanshu in practice: ls -l ls.txt 
-rw-rw-r-- 1 himanshu himanshu 63 Apr 11 15:22 ls.txt
```

The first 10 characters of the listing are the **file attributes**. The first of these characters is the **file type**. The remaining nine characters of the file attributes, called the **file mode**, represent the **read, write, and execute permissions** for the file’s owner, the file’s group owner, and everybody else.

### File Types

- `-` A regular file.
- `d` A directory.
- `l` A symbolic link.  
(Notice that with symbolic links, the remaining file
attributes are always rwxrwxrwx and are dummy values. The real file attributes are those of the file the symbolic link points to.)
- `c` A character special file.  
(This file type refers to a device that handles data as a stream of bytes, such as a terminal or modem.)
- `b` A block special file.  
(This file type refers to a device that handles
data in blocks, such as a hard drive or CD-ROM drive.)

### Permission Attributes

- `r`  

  **File**: Allows a file to be opened and read.  

  **Dir**: Allows a directory’s contents to be listed if the execute attribute is also set.

- `w`  

  **File**: Allows a file to be written to or truncated; however, this attribute does not allow files to be renamed or deleted. The ability to delete or rename files is determined by directory attributes.  

  **Dir**: Allows files within a directory to be created, deleted, and renamed if the execute attribute is also set.

- `x`  

  **File**: Allows a file to be treated as a program and executed. Program files written in scripting languages must also be set as readable to be executed.

  **Dir**: Allows a directory to be entered; e.g., cd directory.
